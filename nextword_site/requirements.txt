Django>=5.0,<6.0
python-dotenv>=1.0
dj-database-url>=2.2

# ---- TensorFlow (platform-aware) ----
# macOS Intel (x86_64) — TF 2.10; Python < 3.11
tensorflow==2.10.1; platform_system == "Darwin" and platform_machine == "x86_64" and python_version < "3.11"
numpy==1.23.*;      platform_system == "Darwin" and platform_machine == "x86_64" and python_version < "3.11"
h5py==3.7.*;        platform_system == "Darwin" and platform_machine == "x86_64" and python_version < "3.11"
grpcio==1.48.2;     platform_system == "Darwin" and platform_machine == "x86_64" and python_version < "3.11"

# macOS Apple Silicon (arm64)
tensorflow-macos==2.16.1; platform_system == "Darwin" and platform_machine == "arm64" and python_version < "3.12"
numpy>=1.26,<2.0;         platform_system == "Darwin" and platform_machine == "arm64" and python_version < "3.12"
h5py>=3.9,<4;             platform_system == "Darwin" and platform_machine == "arm64" and python_version < "3.12"

# Linux/Windows
tensorflow==2.16.1; platform_system != "Darwin" and python_version < "3.12"
numpy>=1.26,<2.0;   platform_system != "Darwin" and python_version < "3.12"
h5py>=3.9,<4;       platform_system != "Darwin" and python_version < "3.12"
# Linux/Windows — make grpcio direct so Dependabot can patch CVEs
grpcio>=1.56.2; platform_system != "Darwin"
tensorflow==2.16.1; platform_system != "Darwin" and python_version < "3.12"

# ---- Dev/test tooling ----
tqdm>=4.66
pytest>=8.1
pytest-django>=4.8
factory-boy>=3.3

